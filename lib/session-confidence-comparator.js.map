{"version":3,"sources":["session-confidence-comparator.js"],"names":[],"mappings":"AAAA;;;;;;;;AAEA;;;;AACA;;;;AACA;;;;;;IAEqB,2B;AACnB,uCAAa,OAAb,EAAsB,QAAtB,EAAgC,SAAhC,EAA2C,KAA3C,EAAkD,QAAlD,EAA4D;AAAA;;AAC1D,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,SAAL,GAAiB,SAAjB;AACA,SAAK,KAAL,GAAa,KAAb;AACA,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,KAAL,GAAa,QAAQ,YAAR,CAAqB,SAArB,CAA+B,MAA/B,GAAwC,CAArD;AACA,SAAK,QAAL,GAAgB,QAAQ,QAAxB;AACD;;;;2BAEO;AACN,WAAK,KAAL;AACA,UAAI,KAAK,KAAL,IAAc,CAAlB,EAAqB;AACnB,aAAK,SAAL,GAAiB,iBAAjB,CAAmC,IAAnC,EAAyC,KAAK,QAA9C,EAAwD,KAAK,SAA7D,EAAwE,KAAK,KAA7E;AACD,OAFD,MAEO;AACL,aAAK,QAAL,CAAc,KAAd;AACD;AACF;;;8BAEU,M,EAAQ;AACjB,WAAK,OAAL,CAAa,YAAb,CAA0B,SAA1B,CAAoC,MAApC,CAA2C,KAAK,KAAL,GAAa,CAAxD;AACA,WAAK,SAAL,GAAiB,aAAjB,CAA+B,KAAK,OAApC,EAA6C,UAAU;AACrD,iBAAS,iBAAO,YAAP,CAAoB;AADwB,OAAvD;AAGA,WAAK,QAAL,CAAc,IAAd;AACD;;;yBAEK,G,EAAK;AACT,UAAM,OAAO,wBAAY,SAAZ,EAAuB,CAAvB,CAAb;AACA,WAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,GAAD,CAAlB;AACA,wBAAQ,SAAR,CAAkB,IAAlB,CAAuB,KAAvB,CAA6B,KAAK,OAAlC,EAA2C,IAA3C;AACA,WAAK,QAAL,CAAc,IAAd;AACD;;;gCAEY;AACX,UAAM,MAAM,KAAK,OAAL,CAAa,YAAb,CAA0B,SAA1B,CAAoC,KAAK,KAAzC,CAAZ;AACA,WAAK,UAAL,GAAkB,IAAI,KAAtB;AACA,aAAO,KAAK,OAAL,CAAa,OAAb,CAAqB,SAArB,CAA+B,IAAI,EAAnC,CAAP;AACD;;;;;;kBAvCkB,2B","file":"session-confidence-comparator.js","sourcesContent":["'use strict'\n\nimport Dialog from './dialog/dialog'\nimport Session from './session'\nimport { extractArgs } from './utils'\n\nexport default class SessionConfidenceComparator {\n  constructor (session, language, utterance, score, callback) {\n    this.session = session\n    this.language = language\n    this.utterance = utterance\n    this.score = score\n    this.callback = callback\n    this.index = session.sessionState.callstack.length - 1\n    this.userData = session.userData\n  }\n\n  next () {\n    this.index--\n    if (this.index >= 0) {\n      this.getDialog().compareConfidence(this, this.language, this.utterance, this.score)\n    } else {\n      this.callback(false)\n    }\n  }\n\n  endDialog (result) {\n    this.session.sessionState.callstack.splice(this.index + 1)\n    this.getDialog().dialogResumed(this.session, result || {\n      resumed: Dialog.resumeReason.childEnded\n    })\n    this.callback(true)\n  }\n\n  send (msg) {\n    const args = extractArgs(arguments, 1)\n    args.splice(0, 0, [msg])\n    Session.prototype.send.apply(this.session, args)\n    this.callback(true)\n  }\n\n  getDialog () {\n    const cur = this.session.sessionState.callstack[this.index]\n    this.dialogData = cur.state\n    return this.session.dialogs.getDialog(cur.id)\n  }\n}\n"],"sourceRoot":"/Users/jacopodaeli/Devs/wit-bot-builder/src"}