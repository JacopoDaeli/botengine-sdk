{"version":3,"sources":["dialog/wit-dialog.js"],"names":[],"mappings":"AAAA;;;;;;;;;AAEA;;;;AACA;;;;;;;;;;;;IAEa,S,WAAA,S;;;AACX,qBAAa,UAAb,EAAyB;AAAA;;AAAA;;AAEvB,UAAK,UAAL,GAAkB,UAAlB;AAFuB;AAGxB;;;;qCAEiB,Q,EAAU,S,EAAW,Q,EAAU;AAC/C,UAAI,MAAM,KAAK,UAAL,CAAgB,IAAhB,EAAV;AACA,UAAI,IAAI,WAAJ,CAAgB,KAAhB,MAA2B,IAAI,MAAJ,GAAa,CAA5C,EAA+C;AAC7C,eAAO,KAAP;AACD;AACD,aAAO,mBAAmB,aAAa,EAAhC,CAAP;AACA,wBAAQ,GAAR,CAAY,GAAZ,EAAiB,UAAC,GAAD,EAAM,GAAN,EAAW,IAAX,EAAoB;AACnC,YAAI,iBAAiB,KAArB;AACA,YAAI;AACF,cAAI,CAAC,GAAL,EAAU;AACR,gBAAM,SAAS,KAAK,KAAL,CAAW,IAAX,CAAf;AACA,gBAAI,OAAO,OAAP,CAAe,MAAf,KAA0B,CAA1B,IAA+B,OAAO,OAAO,OAAP,CAAe,CAAf,EAAkB,KAAzB,KAAmC,QAAtE,EAAgF;AAC9E,qBAAO,OAAP,CAAe,CAAf,EAAkB,KAAlB,GAA0B,GAA1B;AACD;AACD,6BAAiB,IAAjB;AACA,qBAAS,IAAT,EAAe,OAAO,OAAtB,EAA+B,OAAO,QAAtC;AACD,WAPD,MAOO;AACL,6BAAiB,IAAjB;AACA,qBAAS,GAAT;AACD;AACF,SAZD,CAYE,OAAO,CAAP,EAAU;AACV,cAAI,CAAC,cAAL,EAAqB;AACnB,qBAAS,CAAT;AACD,WAFD,MAEO;AACL,oBAAQ,KAAR,CAAc,EAAE,QAAF,EAAd;AACD;AACF;AACF,OArBD;AAsBD","file":"dialog/wit-dialog.js","sourcesContent":["'use strict'\n\nimport request from 'request'\nimport IntentDialog from './intent-dialog'\n\nexport class WitDialog extends IntentDialog {\n  constructor (serviceUri) {\n    super()\n    this.serviceUri = serviceUri\n  }\n\n  recognizeIntents (language, utterance, callback) {\n    let uri = this.serviceUri.trim()\n    if (uri.lastIndexOf('&q=') !== uri.length - 3) {\n      uri += '&q='\n    }\n    uri += encodeURIComponent(utterance || '')\n    request.get(uri, (err, res, body) => {\n      let calledCallback = false\n      try {\n        if (!err) {\n          const result = JSON.parse(body)\n          if (result.intents.length === 1 && typeof result.intents[0].score !== 'number') {\n            result.intents[0].score = 1.0\n          }\n          calledCallback = true\n          callback(null, result.intents, result.entities)\n        } else {\n          calledCallback = true\n          callback(err)\n        }\n      } catch (e) {\n        if (!calledCallback) {\n          callback(e)\n        } else {\n          console.error(e.toString())\n        }\n      }\n    })\n  }\n}\n"],"sourceRoot":"/Users/jacopodaeli/Devs/wit-bot-builder/src"}