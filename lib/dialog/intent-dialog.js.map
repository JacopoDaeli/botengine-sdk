{"version":3,"sources":["dialog/intent-dialog.js"],"names":[],"mappings":"AAAA;;;;;;;;;;AAEA;;;;;;;;;;;;IAEM,Y;;;AACJ,0BAAe;AAAA;;AAAA;;AAEb,UAAK,MAAL,GAAc,EAAd;AACA,UAAK,mBAAL,GAA2B,GAA3B;AACA,UAAK,eAAL,GAAuB,GAAvB,C;AAJa;AAKd;;;;0BAEM,O,EAAS,I,EAAM;AAAA;;AACpB,UAAI,KAAK,WAAT,EAAsB;AACpB,aAAK,WAAL,CAAiB,OAAjB,EAA0B,IAA1B,EAAgC,YAAM;AACpC,+EAAY,IAAZ,SAAuB,OAAvB,EAAgC,IAAhC;AACD,SAFD;AAGD,OAJD,MAIO;AACL,2EAAY,IAAZ,CAAiB,IAAjB,EAAuB,OAAvB,EAAgC,IAAhC;AACD;AACF;;;kCAEc,O,EAAS;AAAA;;AACtB,UAAM,MAAM,QAAQ,OAApB;AACA,WAAK,gBAAL,CAAsB,IAAI,QAA1B,EAAoC,IAAI,IAAxC,EAA8C,UAAC,GAAD,EAAM,OAAN,EAAe,QAAf,EAA4B;AACxE,YAAI,CAAC,GAAL,EAAU;AACR,cAAM,YAAY,OAAK,aAAL,CAAmB,OAAnB,CAAlB;AACA,cAAM,QAAQ,YAAY,UAAU,KAAtB,GAA8B,CAA5C;AACA,kBAAQ,iBAAR,CAA0B,IAAI,QAA9B,EAAwC,IAAI,IAA5C,EAAkD,KAAlD,EAAyD,UAAC,OAAD,EAAa;AACpE,gBAAI,CAAC,OAAL,EAAc;AACZ,qBAAK,YAAL,CAAkB,OAAlB,EAA2B,OAA3B,EAAoC,QAApC;AACD;AACF,WAJD;AAKD,SARD,MAQO;AACL,kBAAQ,SAAR,CAAkB;AAChB,mBAAO,IAAI,KAAJ,gCAAuC,IAAI,OAA3C;AADS,WAAlB;AAGD;AACF,OAdD;AAeD;;;kCAEc,O,EAAS,M,EAAQ,CAE/B;;;;;;AAGH,aAAa,iBAAb,GAAiC,GAAjC;;kBAEe,Y","file":"dialog/intent-dialog.js","sourcesContent":["'use strict'\n\nimport Dialog from './dialog'\n\nclass IntentDialog extends Dialog {\n  constructor () {\n    super()\n    this.groups = {}\n    this.confidenceThreshold = 0.1\n    this.intentThreshold = 0.1 // TODO: replace this with the above one\n  }\n\n  begin (session, args) {\n    if (this.beginDialog) {\n      this.beginDialog(session, args, () => {\n        super.begin.call(this, session, args)\n      })\n    } else {\n      super.begin.call(this, session, args)\n    }\n  }\n\n  replyReceived (session) {\n    const msg = session.message\n    this.recognizeIntents(msg.language, msg.text, (err, intents, entities) => {\n      if (!err) {\n        const topIntent = this.findTopIntent(intents)\n        const score = topIntent ? topIntent.score : 0\n        session.compareConfidence(msg.language, msg.text, score, (handled) => {\n          if (!handled) {\n            this.invokeIntent(session, intents, entities)\n          }\n        })\n      } else {\n        session.endDialog({\n          error: new Error(`Intent recognition error: ${err.message}`)\n        })\n      }\n    })\n  }\n\n  dialogResumed (session, result) {\n\n  }\n}\n\nIntentDialog.CAPTURE_THRESHOLD = 0.6\n\nexport default IntentDialog\n"],"sourceRoot":"/Users/jacopodaeli/Devs/wit-bot-builder/src"}